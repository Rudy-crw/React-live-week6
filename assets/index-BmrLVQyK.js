import{j as e,L as A,O as se,r as u,u as q,w as M,a as te,S as ae,b as I,c as W,d as D,n as le,e as re,R as ne,f as ce}from"./vendor-react-BKi3rbxE.js";import{M as K}from"./vendor-bootstrap-BvBI7meH.js";import{a as d}from"./vendor-axios-B9ygI19o.js";import{S as U}from"./vendor-swal-BQxta0Da.js";import{N as ie,P as oe}from"./vendor-swiper-BciwL7nL.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function x(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(s){if(s.ep)return;s.ep=!0;const t=x(s);fetch(s.href,t)}})();const de=()=>e.jsxs(e.Fragment,{children:[e.jsx("header",{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("ul",{className:"nav",children:[e.jsx("li",{className:"nav-item btn ",children:e.jsx(A,{className:"nav-link ",to:"/",children:"首頁"})}),e.jsx("li",{className:"nav-item btn",children:e.jsx(A,{className:"nav-link",to:"/products",children:"產品列表"})})]}),e.jsxs("ul",{className:"nav",children:[e.jsx("li",{className:"nav-item btn",children:e.jsx(A,{className:"nav-link",to:"/cart",children:"購物車"})}),e.jsx("li",{className:"nav-item btn",children:e.jsx(A,{className:"nav-link",to:"/checkout",children:"結帳"})}),e.jsx("li",{className:"nav-item btn",children:e.jsx(A,{className:"nav-link",to:"/login",children:"後台登入"})})]})]})}),e.jsx("main",{children:e.jsx(se,{})}),e.jsx("footer",{children:e.jsx("p",{className:"mt-5 mb-3 text-muted",children:"© 2026~∞ Rudy-六角學院- React 直播班"})})]}),me=()=>e.jsxs("div",{className:"home-page",children:[e.jsx("div",{className:"hero-background",style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",zIndex:-1,overflow:"hidden"},children:e.jsx("img",{src:"https://github.com/Rudy-crw/React-live-week5/blob/main/src/public/HomeHero.png?raw=true",alt:"R-Garage Hero",style:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.6)"}})}),e.jsx("div",{className:"container d-flex flex-column justify-content-center align-items-center text-white",style:{minHeight:"100vh",paddingTop:"80px"},children:e.jsxs("div",{className:"text-center animate__animated animate__fadeInUp",children:[e.jsx("h1",{className:"display-1 fw-bold text-uppercase mb-3",style:{letterSpacing:"5px"},children:"R-Garage"}),e.jsx("p",{className:"fs-3 fw-light mb-4 text-white-50",children:"釋放你的騎士靈魂 | 頂級重機租賃"}),e.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[e.jsx(A,{to:"/products",className:"btn btn-primary btn-lg px-5 py-3 rounded-pill fw-bold shadow",children:"立即預約"}),e.jsx("a",{href:"#intro",className:"btn btn-outline-light btn-lg px-5 py-3 rounded-pill",children:"了解更多"})]})]})}),e.jsxs("section",{id:"intro",className:"py-5 bg-light text-dark position-relative",style:{zIndex:1},children:[e.jsx("style",{children:`
            .feature-card {
              transition: all 0.3s ease;
              border: none;
            }
            .feature-card:hover {
              transform: translateY(-10px); /* 往上浮動 */
              box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important; /* 加深陰影 */
            }
            .icon-box {
              width: 80px;
              height: 80px;
              display: inline-flex;
              align-items: center;
              justify-content: center;
              transition: all 0.3s ease;
            }
            .feature-card:hover .icon-box {
              background-color: var(--bs-primary) !important;
              color: white !important;
            }
          `}),e.jsxs("div",{className:"container py-5",children:[e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-12 mb-5",children:[e.jsx("h2",{className:"fw-bold display-6",children:"為什麼選擇 R-Garage？"}),e.jsx("div",{className:"bg-primary mx-auto mt-3 rounded",style:{width:"60px",height:"4px"}}),e.jsx("p",{className:"text-muted mt-3 fs-5",children:"我們不只租車，更提供一種生活態度"})]}),e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:e.jsx("i",{className:"bi bi-speedometer2"})}),e.jsx("h4",{className:"card-title fw-bold mb-3",children:"極致性能"}),e.jsx("p",{className:"card-text text-muted",children:"提供 Ducati V4 S、BMW S1000RR 等頂級仿賽，保證原廠輸出，拒絕閹割馬力，體驗最純粹的速度感。"})]})})}),e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:e.jsx("i",{className:"bi bi-shield-check"})}),e.jsx("h4",{className:"card-title fw-bold mb-3",children:"安全保障"}),e.jsx("p",{className:"card-text text-muted",children:"每台車輛皆定期由原廠技師檢修，並含強制險與道路救援服務，輪胎與煞車絕對是最佳狀態。"})]})})}),e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card h-100 feature-card shadow-sm rounded-4 p-4 bg-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"icon-box mb-4 bg-primary bg-opacity-10 text-primary rounded-circle fs-2",children:e.jsx("i",{className:"bi bi-geo-alt-fill"})}),e.jsx("h4",{className:"card-title fw-bold mb-3",children:"取車便利"}),e.jsx("p",{className:"card-text text-muted",children:"位於市中心交通樞紐，提供進口安全帽、手套與藍芽耳機租借。只需帶上您的駕照，隨時出發。"})]})})})]}),e.jsx("div",{className:"text-center mt-5",children:e.jsxs(A,{to:"/products",className:"btn btn-outline-dark px-5 py-2 rounded-pill border-2 fw-bold",children:["查看全車系 (12款) ",e.jsx("i",{className:"bi bi-arrow-right ms-2"})]})})]})]})]}),C=n=>(Number(n)||0).toLocaleString(),he="https://vue3-course-api.hexschool.io/v2",xe="rudy2026",ue=()=>{const[n,r]=u.useState([]),x=q();u.useEffect(()=>{(async()=>{try{const t=await d.get(`${he}/api/${xe}/products/all`);r(t.data.products)}catch(t){console.log(t.response)}})()},[]);const i=s=>{x(`/product/${s}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justidy-content-center",children:n.map(s=>e.jsx("div",{className:"col-md-4  col-6 mb-3 ",children:e.jsxs("div",{className:"card ",children:[e.jsx("img",{src:s.imageUrl,className:"card-img-top",alt:s.title}),e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title",children:[s.category," ",s.title," ",e.jsx("span",{className:"badge rounded-pill text-bg-danger ms-2",children:s.style})]}),e.jsx("p",{className:"card-text",children:s.description}),e.jsxs("p",{className:"card-text",children:[e.jsxs("del",{children:["原價：",C(s.origin_price)]})," 售價：",C(s.price),e.jsxs("small",{className:"text-body-secondary",children:["/",s.unit]})]}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>i(s.id),children:"查看更多"})]})]})},s.id))})})})},pe=M(U),je=pe.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}),z="https://vue3-course-api.hexschool.io/v2",V="rudy2026",be=()=>{const{id:n}=te(),[r,x]=u.useState();u.useEffect(()=>{(async t=>{try{const l=await d.get(`${z}/api/${V}/product/${t}`);x(l.data.product)}catch(l){console.log(l.response)}})(n)},[n]);const i=async(s,t)=>{try{const l={product_id:s,qty:1},g=await d.post(`${z}/api/${V}/cart`,{data:l});console.log(g.data),je.fire({icon:"success",title:"商品已加入購物車"})}catch(l){console.log(l.response)}};return r?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mt-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:"首頁"}),e.jsx("li",{className:"breadcrumb-item",children:"產品列表"}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:r.title}),e.jsxs("li",{className:"breadcrumb-item active","aria-current":"page",children:[r.category," ",r.title]})]})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-7",children:e.jsxs(ae,{modules:[ie,oe],navigation:!0,pagination:{clickable:!0},spaceBetween:10,slidesPerView:1,loop:!0,className:"rounded-3 shadow-sm",style:{height:"500px",backgroundColor:"#f8f9fa"},children:[e.jsx(I,{children:e.jsx("img",{src:r.imageUrl,className:"w-100 h-100 object-fit-contain",alt:`${r.category} ${r.title}`})}),r.imagesUrl?.map((s,t)=>e.jsx(I,{children:e.jsx("img",{src:s,className:"w-100 h-100 object-fit-contain",alt:`附圖-${t}`})},t))]})}),e.jsxs("div",{className:"col-md-5 mt-4 mt-md-0",children:[" ",e.jsxs("div",{className:"d-flex flex-column h-100 justify-content-center",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"badge bg-dark",children:r.style})}),e.jsxs("h1",{className:"fw-bold mb-3",children:[r.category," ",r.title]}),e.jsx("p",{className:"fs-5 text-muted mb-4",children:r.description}),e.jsx("div",{className:"mb-3 p-3 bg-light rounded",children:e.jsx("p",{className:"mb-0 text-secondary",children:r.content})}),e.jsx("div",{className:" mb-4",children:e.jsxs("p",{className:"card-text fs-5",children:[e.jsxs("del",{className:"text-muted me-2",children:["原價：",C(r.origin_price)]}),"售價：",e.jsx("span",{className:"fw-bold text-danger display-6",children:C(r.price)}),e.jsxs("small",{className:"text-body-secondary ms-1",children:["/",r.unit]})]})}),e.jsx("div",{className:"d-grid gap-2",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-lg py-3 fw-bold shadow-sm",onClick:()=>i(r.id),children:[e.jsx("i",{className:"bi bi-cart-plus-fill me-2"})," 加入購物車"]})})]})]})]})]})}):e.jsx("h2",{children:"查無產品"})},S="https://vue3-course-api.hexschool.io/v2",_="rudy2026",ge=M(U),O=ge.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}),Ne=()=>{const[n,r]=u.useState({});u.useEffect(()=>{(async()=>{try{const l=await d.get(`${S}/api/${_}/cart`);r(l.data.data),console.log("res.data.data:",l.data)}catch(l){console.log(l.response)}})()},[]);const x=async(t,l,g=1)=>{try{const N={product_id:l,qty:g},w=await d.put(`${S}/api/${_}/cart/${t}`,{data:N});console.log(w);const $=await d.get(`${S}/api/${_}/cart`);r($.data.data),O.fire({icon:"success",title:"商品數量已成功更新"})}catch(N){console.log(N.response)}},i=async t=>{try{const l=await d.delete(`${S}/api/${_}/cart/${t}`);console.log(l);const g=await d.get(`${S}/api/${_}/cart`);r(g.data.data),O.fire({icon:"success",title:"商品刪除成功！"})}catch(l){console.log(l.response)}},s=async()=>{try{const t=await d.delete(`${S}/api/${_}/carts`);console.log(t);const l=await d.get(`${S}/api/${_}/cart`);r(l.data.data)}catch(t){console.log(t.response)}};return e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"購物車列表"}),e.jsx("div",{className:"text-end mt-4",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{s()},children:"清空購物車"})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col",children:"品名"}),e.jsx("th",{scope:"col",children:"數量/單位"}),e.jsx("th",{className:"text-end",scope:"col",children:"小計"})]})}),e.jsx("tbody",{children:n?.carts?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>{i(t.id)},children:"刪除"})}),e.jsx("td",{children:e.jsx("img",{src:t.product.imageUrl,alt:t.product.title,style:{width:100}})}),e.jsxs("th",{scope:"row",children:[t.product.category," ",t.product.title]}),e.jsxs("td",{children:[t.product.qty,e.jsxs("div",{className:"input-group input-group-sm mb-3",children:[e.jsx("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",defaultValue:t.qty,onChange:l=>{x(t.id,t.product_id,Number(l.target.value))}}),e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:t.product.unit})]})]}),e.jsx("td",{className:"text-end",children:C(t.final_total)})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-end",colSpan:"4",children:"總計"}),e.jsx("td",{className:"text-end",children:C(n.final_total)})]})})]})]})},fe=()=>e.jsx(e.Fragment,{children:e.jsx("h1",{children:"錯誤頁面，畫面即將轉至首頁。"})}),ye=({product:n,addCart:r,closeModal:x})=>{const[i,s]=u.useState(1),t=()=>{r(n.id,i),x()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"modal",id:"productModal",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[n.category," ",n.title]}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("img",{className:"w-100",src:n.imageUrl}),e.jsx("p",{className:"mt-3",children:n.description}),e.jsx("p",{children:n.content}),e.jsxs("p",{children:["價錢：",e.jsxs("del",{children:["$",n.origin_price]}),"，特價：$",n.price]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{style:{width:"150px"},children:"購買數量："}),e.jsx("button",{className:"btn btn-danger",type:"button",id:"button-addon1","aria-label":"Decrease quantity",onClick:()=>s(l=>l===1?1:l-1),children:e.jsx("i",{className:"fa-solid fa-minus"})}),e.jsx("input",{className:"form-control",type:"number",min:"1",max:"10",value:i,onChange:l=>s(Number(l.target.value))}),e.jsx("button",{className:"btn btn-primary",type:"button",id:"button-addon2","aria-label":"Decrease quantity",onClick:()=>s(l=>l+1),children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{t()},children:"加入購物車"})})]})})})})},Y={required:"請輸入 Email",pattern:{value:/^\S+@\S+$/i,message:"Email 格式不正確"}},f="https://vue3-course-api.hexschool.io/v2",y="rudy2026",ve=M(U),R=ve.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}),we=()=>{const[n,r]=u.useState([]),[x,i]=u.useState({}),[s,t]=u.useState({}),[l,g]=u.useState(null),[N,w]=u.useState(null),$=u.useRef(null),{register:v,handleSubmit:k,formState:{errors:a}}=W({mode:"onChange"});u.useEffect(()=>{(async()=>{try{const b=await d.get(`${f}/api/${y}/products/all`);r(b.data.products),console.log(b.data.products)}catch(b){console.log(b.response)}})(),(async()=>{try{const b=await d.get(`${f}/api/${y}/cart`);i(b.data.data)}catch(b){console.log(b.response)}})(),$.current=new K("#productModal",{keyboard:!1}),document.querySelector("#productModal").addEventListener("hide.bs.modal",()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})},[]);const m=async(c,p,b=1)=>{try{const P={product_id:p,qty:b},H=await d.put(`${f}/api/${y}/cart/${c}`,{data:P}),ee=await d.get(`${f}/api/${y}/cart`);i(ee.data.data),R.fire({icon:"success",title:"商品數量已成功更新"})}catch(P){console.log(P.response)}},o=async(c,p)=>{g(c);try{const b={product_id:c,qty:p},P=await d.post(`${f}/api/${y}/cart`,{data:b});console.log(P.data),R.fire({icon:"success",title:"商品已加入購物車"});const H=await d.get(`${f}/api/${y}/cart`);i(H.data.data)}catch(b){console.log(b.response)}finally{g(null)}},h=async c=>{try{const p=await d.delete(`${f}/api/${y}/cart/${c}`),b=await d.get(`${f}/api/${y}/cart`);i(b.data.data),R.fire({icon:"success",title:"商品刪除成功！"})}catch(p){console.log(p.response)}},j=async()=>{try{const c=await d.delete(`${f}/api/${y}/carts`),p=await d.get(`${f}/api/${y}/cart`);i(p.data.data)}catch(c){console.log(c.response)}},E=async c=>{try{const p={user:c,message:c.message},b=await d.post(`${f}/api/${y}/order`,{data:p});console.log(b.data);const P=await d.get(`${f}/api/${y}/cart`);i(P.data.data)}catch(p){console.log(p.response)}},X=async c=>{w(c);try{const p=await d.get(`${f}/api/${y}/product/${c}`);t(p.data.product)}catch(p){console.log(p.response)}finally{w(null)}$.current.show()},Z=()=>{$.current.hide()};return e.jsxs("div",{className:"container",children:[e.jsxs("table",{className:"table align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"圖片"}),e.jsx("th",{children:"商品名稱"}),e.jsx("th",{children:"價格"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"200px"},children:e.jsx("div",{style:{height:"100px",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${c.imageUrl})`}})}),e.jsxs("td",{children:[c.category," ",c.title]}),e.jsxs("td",{children:[e.jsxs("del",{className:"h6",children:["原價：",c.origin_price]}),e.jsxs("div",{className:"h5",children:["特價：",c.price]})]}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{X(c.id)},disabled:N===c.id,children:N===c.id?e.jsx(D,{color:"grey",width:80,height:16}):"查看更多"}),e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{o(c.id)},disabled:l===c.id,children:l===c.id?e.jsx(D,{color:"grey",width:80,height:16}):"加到購物車"})]})})]},c.id))})]}),e.jsx("h2",{children:"購物車列表"}),e.jsx("div",{className:"text-end mt-4",children:e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>{j()},children:"清空購物車"})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col",children:"品名"}),e.jsx("th",{scope:"col",children:"數量/單位"}),e.jsx("th",{className:"text-end",scope:"col",children:"小計"})]})}),e.jsx("tbody",{children:x?.carts?.map(c=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>{h(c.id)},children:"刪除"})}),e.jsx("td",{children:e.jsx("img",{src:c.product.imageUrl,alt:c.product.title,style:{width:100}})}),e.jsxs("th",{scope:"row",children:[c.product.category," ",c.product.title]}),e.jsxs("td",{children:[c.product.qty,e.jsxs("div",{className:"input-group input-group-sm mb-3",children:[e.jsx("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",defaultValue:c.qty,onChange:p=>{m(c.id,c.product_id,Number(p.target.value))}}),e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:c.product.unit})]})]}),e.jsx("td",{className:"text-end",children:C(c.final_total)})]},c.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-end",colSpan:"4",children:"總計"}),e.jsx("td",{className:"text-end",children:C(x.final_total)})]})})]}),e.jsx("div",{className:"my-5 row justify-content-center",children:e.jsxs("form",{className:"col-md-6",onSubmit:k(E),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",className:"form-control",placeholder:"請輸入 Email",...v("email",Y)}),a.email&&e.jsx("p",{className:"text-danger",children:a.email.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"收件人姓名"}),e.jsx("input",{id:"name",name:"name",type:"text",className:"form-control",placeholder:"請輸入姓名",...v("name",{required:"請輸入姓名",minLength:{value:2,message:"姓名最少 2 個字"}})}),a.name&&e.jsx("p",{className:"text-danger",children:a.name.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"tel",className:"form-label",children:"收件人電話"}),e.jsx("input",{id:"tel",name:"tel",type:"tel",className:"form-control",placeholder:"請輸入電話",...v("tel",{required:"請輸入電話",pattern:{value:/^\d+$/,minLength:{value:8,message:"電話至少 8 碼"}}})}),a.tel&&e.jsx("p",{className:"text-danger",children:a.tel.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"收件人地址"}),e.jsx("input",{id:"address",name:"address",type:"text",className:"form-control",placeholder:"請輸入地址",...v("address",{required:"請輸入地址"})}),a.address&&e.jsx("p",{className:"text-danger",children:a.address.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"留言"}),e.jsx("textarea",{id:"message",className:"form-control",cols:"30",rows:"10",...v("message")})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-danger",children:"送出訂單"})})]})}),e.jsx(ye,{product:s,addCart:o,closeModal:Z})]})},$e="https://vue3-course-api.hexschool.io/v2",Ce=M(U),G=Ce.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0});function ke(){const n=q(),{register:r,handleSubmit:x,formState:{errors:i,isValid:s}}=W({mode:"onChange",defaultValues:{username:"s60990340@gmail.com",password:""}}),t=async l=>{try{const g=await d.post(`${$e}/admin/signin`,l);console.log(g.data);const{token:N,expired:w}=g.data;document.cookie=`hexToken=${N}; expires=${new Date(w)}`,d.defaults.headers.common.Authorization=N,G.fire({icon:"success",title:"登入成功"}),n("/dashboardproducts")}catch(g){G.fire({icon:"error",title:"登入失敗，請檢查帳號密碼！"}),console.log(g.response)}};return e.jsx("div",{className:"container login",children:e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("h1",{className:"h3 mb-3 font-weight-normal",children:"請先登入"}),e.jsx("div",{className:"col-8",children:e.jsxs("form",{id:"form",className:"form-signin",onSubmit:x(t),children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"email",className:"form-control",name:"username",placeholder:"name@product.com",required:!0,autoFocus:!0,...r("username",Y)}),e.jsx("label",{htmlFor:"username",children:"Email address"}),i.username&&e.jsx("p",{className:"text-danger",children:i.username.message})]}),e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",required:!0,...r("password",{required:"請輸入密碼",minLength:{value:6,message:"密碼最少 6 碼"}})}),e.jsx("label",{htmlFor:"password",children:"Password"}),i.password&&e.jsx("p",{className:"text-danger",children:i.password.message})]}),e.jsx("button",{className:"btn btn-lg btn-primary w-100 mt-3",type:"submit",disabled:!s,children:"登入"})]})})]})})}const J=M(U),F=J.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.onmouseenter=U.stopTimer,n.onmouseleave=U.resumeTimer}}),L="https://vue3-course-api.hexschool.io/v2",B="rudy2026";function Pe({modalType:n,templateProduct:r,closeModal:x,getProducts:i}){const[s,t]=u.useState(r);u.useEffect(()=>{t(r)},[r]);const l=a=>{const{name:m,value:o,checked:h,type:j}=a.target;t(E=>({...E,[m]:j==="checkbox"?h:o}))},g=(a,m)=>{t(o=>{const h=[...o.imagesUrl];return h[a]=m,m!==""&&a===h.length-1&&h.length<5&&h.push(""),m===""&&h.length>1&&h[h.length-1]===""&&h.pop(),{...o,imagesUrl:h}})},N=()=>{t(a=>{const m=[...a.imagesUrl];return m.push(""),{...a,imagesUrl:m}})},w=()=>{t(a=>{const m=[...a.imagesUrl];return m.pop(),{...a,imagesUrl:m}})},$=async a=>{let m=`${L}/api/${B}/admin/product`,o="post";n==="edit"&&(m=`${L}/api/${B}/admin/product/${a}`,o="put");const h={data:{...s,origin_price:Number(s.origin_price),price:Number(s.price),is_enabled:s.is_enabled?1:0,imagesUrl:[...s.imagesUrl.filter(j=>j!=="")]}};try{const j=await d[o](m,h);console.log(j.data),F.fire({icon:"success",title:`商品${o==="post"?"新增":"更新"}成功！`}),i(),x()}catch(j){const E=j.response?.data?.message||j.message;J.fire({title:"操作失敗",text:E,icon:"error"})}},v=async a=>{try{const m=await d.delete(`${L}/api/${B}/admin/product/${a}`);console.log(m.data),F.fire({icon:"success",title:"商品已成功刪除"}),i(),x()}catch(m){F.fire({icon:"error",title:"刪除失敗",text:m.response?.data?.message})}},k=async a=>{const m=a.target.files?.[0];if(!m){F.fire({icon:"warning",title:"請選擇要上傳的檔案"});return}try{const o=new FormData;o.append("file-to-upload",m);const h=await d.post(`${L}/api/${B}/admin/upload`,o);t(j=>({...j,imageUrl:h.data.imageUrl})),F.fire({icon:"success",title:"圖片上傳成功"})}catch(o){console.log(o.response),F.fire({icon:"error",title:"圖片上傳失敗"})}};return e.jsx("div",{className:"modal fade",id:"productModal",tabIndex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content border-0",children:[e.jsxs("div",{className:`modal-header bg-${n==="delete"?"danger":"dark"} text-white`,children:[e.jsx("h5",{id:"productModalLabel",className:"modal-title",children:e.jsxs("span",{children:[n==="delete"?"刪除":n==="edit"?"編輯":"新增","產品"]})}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:n==="delete"?e.jsxs("p",{className:"fs-4",children:["確定要刪除",e.jsx("span",{className:"text-danger",children:s.title}),"嗎？"]}):e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"fileUpload",className:"form-label",children:"上傳圖片"}),e.jsx("input",{className:"form-control",type:"file",name:"fileUpload",id:"fileUpload",accept:".jpg,.jpeg,.png",onChange:a=>k(a)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"imageUrl",className:"form-label",children:"輸入圖片網址"}),e.jsx("input",{type:"text",id:"imageUrl",name:"imageUrl",className:"form-control",placeholder:"請輸入圖片連結",value:s.imageUrl,onChange:a=>l(a)})]}),s.imageUrl&&e.jsx("img",{className:"img-fluid",src:s.imageUrl,alt:"主圖"})]}),e.jsxs("div",{children:[s.imagesUrl.map((a,m)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"form-label",children:"輸入圖片網址"}),e.jsx("input",{type:"text",className:"form-control",placeholder:`圖片網址${m+1}`,value:a,onChange:o=>g(m,o.target.value)}),a&&e.jsx("img",{className:"img-fluid",src:a,alt:`副圖${m+1}`})]},m)),s.imagesUrl.length<5&&s.imagesUrl[s.imagesUrl.length-1]!==""&&e.jsx("button",{className:"btn btn-outline-primary btn-sm d-block w-100",onClick:()=>N(),children:"新增圖片"})]}),e.jsx("div",{children:s.imagesUrl.length>=1&&e.jsx("button",{className:"btn btn-outline-danger btn-sm d-block w-100",onClick:()=>w(),children:"刪除圖片"})})]}),e.jsxs("div",{className:"col-sm-8",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"title",className:"form-label",children:"產品名稱"}),e.jsx("input",{name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題",value:s.title,onChange:a=>l(a)})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-3 col-md-6",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"分類"}),e.jsx("input",{name:"category",id:"category",type:"text",className:"form-control",placeholder:"請輸入分類",value:s.category,onChange:a=>l(a)})]}),e.jsxs("div",{className:"mb-3 col-md-6",children:[e.jsx("label",{htmlFor:"unit",className:"form-label",children:"單位"}),e.jsx("input",{name:"unit",id:"unit",type:"text",className:"form-control",placeholder:"請輸入單位",value:s.unit,onChange:a=>l(a)})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-3 col-md-6",children:[e.jsx("label",{htmlFor:"origin_price",className:"form-label",children:"原價"}),e.jsx("input",{name:"origin_price",id:"origin_price",type:"number",min:"0",className:"form-control",placeholder:"請輸入原價",value:s.origin_price,onChange:a=>l(a)})]}),e.jsxs("div",{className:"mb-3 col-md-6",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"售價"}),e.jsx("input",{name:"price",id:"price",type:"number",min:"0",className:"form-control",placeholder:"請輸入售價",value:s.price,onChange:a=>l(a)})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"產品描述"}),e.jsx("textarea",{name:"description",id:"description",className:"form-control",placeholder:"請輸入產品描述",value:s.description,onChange:a=>l(a)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"content",className:"form-label",children:"說明內容"}),e.jsx("textarea",{name:"content",id:"content",className:"form-control",placeholder:"請輸入說明內容",value:s.content,onChange:a=>l(a)})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox",checked:s.is_enabled,onChange:a=>l(a)}),e.jsx("label",{className:"form-check-label",htmlFor:"is_enabled",children:"是否啟用"})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-check-label",htmlFor:"style",children:"車型"}),e.jsxs("select",{id:"style",name:"style",className:"form-select","aria-label":"Default select example",value:s.style,onChange:a=>l(a),children:[e.jsx("option",{value:"",children:"請選擇車型風格"}),e.jsx("option",{value:"仿賽",children:"仿賽"}),e.jsx("option",{value:"街車",children:"街車"}),e.jsx("option",{value:"速克達",children:"速克達"}),e.jsx("option",{value:"多功能",children:"多功能"}),e.jsx("option",{value:"美式",children:"美式"}),e.jsx("option",{value:"復古",children:"復古"})]})]})]})]})}),e.jsx("div",{className:"modal-footer",children:n==="delete"?e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>v(s.id),children:"刪除"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:()=>x(),children:"取消"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>$(s.id),children:"確認"})]})})]})})})}function Se({pagination:n,onChangePage:r}){const x=(i,s)=>{i.preventDefault(),r(s)};return e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${!n.has_pre&&"disabled"}`,children:e.jsx("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:i=>x(i,n.current_page-1),children:e.jsx("span",{"aria-hidden":"true",children:"«"})})}),Array.from({length:n.total_pages},(i,s)=>e.jsx("li",{className:`page-item ${n.current_page===s+1&&"active"}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:t=>x(t,s+1),children:s+1})},`${s}_page`)),e.jsx("li",{className:`page-item ${!n.has_next&&"disabled"}`,children:e.jsx("a",{className:"page-link",href:"#","aria-label":"Next",onClick:i=>x(i,n.current_page+1),children:e.jsx("span",{"aria-hidden":"true",children:"»"})})})]})})}const Q="https://vue3-course-api.hexschool.io/v2",_e="rudy2026",T={id:"",title:"",category:"",origin_price:"",price:"",unit:"",description:"",content:"",is_enabled:!1,imageUrl:"",imagesUrl:[],style:""};function Ae(){const n=q(),[r,x]=u.useState(!1),[i,s]=u.useState([]),[t,l]=u.useState(T),[g,N]=u.useState(),[w,$]=u.useState({}),v=u.useRef(null),k=async(o=1)=>{try{const h=await d.get(`${Q}/api/${_e}/admin/products?page=${o}`);s(Object.values(h.data.products)),$(h.data.pagination)}catch(h){console.error(h)}};u.useEffect(()=>{const o=document.cookie.split("; ").find(j=>j.startsWith("hexToken="))?.split("=")[1];if(!o){n("/login");return}d.defaults.headers.common.Authorization=o,(async()=>{try{const j=await d.post(`${Q}/api/user/check`);console.log("token 驗證結果:",j.data),x(!0),k()}catch(j){console.error("token 驗證失敗",j.response)}})(),v.current=new K("#productModal",{keyboard:!1})},[n]);const a=(o,h)=>{N(o),l({...T,...h}),v.current.show()},m=()=>{v.current.hide()};return e.jsxs(e.Fragment,{children:[r?e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"產品列表"}),e.jsx("div",{className:"text-end mt-4",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>a("create",T),children:"建立新的產品"})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"品牌"}),e.jsx("th",{children:"車型風格"}),e.jsx("th",{children:"產品名稱"}),e.jsx("th",{children:"原價"}),e.jsx("th",{children:"售價"}),e.jsx("th",{children:"是否啟用"}),e.jsx("th",{children:"編輯"})]})}),e.jsx("tbody",{children:i&&i.length>0?i.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.category}),e.jsx("td",{children:o.style}),e.jsx("th",{scope:"row",children:o.title}),e.jsx("td",{children:o.origin_price}),e.jsx("td",{children:o.price}),e.jsx("td",{className:`${o.is_enabled&&"text-success"}`,children:o.is_enabled?"啟用":"未啟用"}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",role:"group","aria-label":"Basic product",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>a("edit",o),children:"編輯"}),e.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>a("delete",o),children:"刪除"})]})})]},o.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"尚無產品資料"})})})]}),e.jsx(Se,{pagination:w,onChangePage:k})]}):e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{minHeight:"100vh",backgroundColor:"#f8f9fa"},children:[e.jsx(le,{height:"80",width:"80",color:"#0d6efd",ariaLabel:"tail-spin-loading",radius:"1",wrapperStyle:{},wrapperClass:"",visible:!0}),e.jsx("p",{className:"mt-3 text-secondary fw-bold",children:"系統驗證中，請稍候..."})]}),e.jsx(Pe,{modalType:g,templateProduct:t,closeModal:m,getProducts:k})]})}const Ue=re([{path:"/",element:e.jsx(de,{}),children:[{index:!0,element:e.jsx(me,{})},{path:"products/",element:e.jsx(ue,{})},{path:"product/:id",element:e.jsx(be,{})},{path:"cart",element:e.jsx(Ne,{})},{path:"checkout",element:e.jsx(we,{})},{path:"login",element:e.jsx(ke,{})}]},{path:"dashboardproducts",element:e.jsx(Ae,{})},{path:"*",element:e.jsx(fe,{})}]),Fe=()=>e.jsx(ne,{router:Ue});ce.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(Fe,{})}));
